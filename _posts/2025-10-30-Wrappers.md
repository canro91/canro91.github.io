---
layout: post
title: "TIL: Always Wrap Collections in API Responses"
tags: todayilearned asp.net
---

Note to future me:

You've learned this before. But it's easy to forget or let teammates (or clients) make the same mistake.

**Always return collections wrapped inside a response object from your APIs.**

Adding fields, like `pageNumber` and `itemCount`, won't break the UI or other clients. This is one of the few places where you should forget about YAGNI. Remember _You Aren't Gonna Need It_? Is that still a guideline in [the future with AI]({% post_url 2024-04-29-2034Predictions %})? Anyway...

Please, don't do:

```csharp
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();

app.MapGet("/", () =>
{
    return new[] { "Titanic", "Terminator" };
	//     ^^^^^
	// Please don't.
	// Otherwise a cute baby panda dies in the forest
});

app.Run();
```

Instead, please do:

```csharp
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();

app.MapGet("/", () =>
{
    return new
    {
        Items = new[] { "Titanic", "Terminator" }
        // ^^^^
        // OK, with a proper object.
        // You know we're lazy with the examples
    };
});

app.Run();
```

Just today, in a client project, I realized we let this mistake happen and we had to update almost a dozens pages in a Blazor app.

Make this an API commandment.
